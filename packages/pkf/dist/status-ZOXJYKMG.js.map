{"version":3,"sources":["../src/commands/status.ts"],"sourcesContent":["/**\r\n * Status Command\r\n * Shows PKF status in current project\r\n */\r\n\r\nimport { existsSync, readFileSync, statSync } from 'node:fs';\r\nimport { join } from 'node:path';\r\nimport chalk from 'chalk';\r\n\r\nexport async function statusCommand(): Promise<void> {\r\n  const cwd = process.cwd();\r\n\r\n  console.log(chalk.bold('\\nPKF Status\\n'));\r\n\r\n  // Check initialization\r\n  const configPath = join(cwd, 'pkf.config.yaml');\r\n  const isInitialized = existsSync(configPath);\r\n\r\n  if (!isInitialized) {\r\n    console.log(chalk.yellow('⚠ PKF is not initialized in this project\\n'));\r\n    console.log(chalk.gray('  Run `pkf init` to get started.\\n'));\r\n    return;\r\n  }\r\n\r\n  console.log(chalk.green('✓ PKF initialized\\n'));\r\n\r\n  // Parse config\r\n  try {\r\n    const configContent = readFileSync(configPath, 'utf8');\r\n    const versionMatch = configContent.match(/version:\\s*[\"']?([^\"'\\n]+)[\"']?/);\r\n    const nameMatch = configContent.match(/name:\\s*[\"']?([^\"'\\n]+)[\"']?/);\r\n\r\n    console.log(chalk.bold('Configuration:'));\r\n    console.log(chalk.gray(`  Project: ${nameMatch?.[1] || 'Unknown'}`));\r\n    console.log(chalk.gray(`  Version: ${versionMatch?.[1] || 'Unknown'}`));\r\n    console.log(chalk.gray(`  Config:  ${configPath}`));\r\n    console.log('');\r\n  } catch {\r\n    console.log(chalk.yellow('  Could not parse configuration\\n'));\r\n  }\r\n\r\n  // Check build artifacts\r\n  const buildDir = join(cwd, '.pkf/generated');\r\n  const structurePath = join(buildDir, 'structure.json');\r\n  const hasBuildArtifacts = existsSync(structurePath);\r\n\r\n  console.log(chalk.bold('Build Status:'));\r\n  if (hasBuildArtifacts) {\r\n    const stats = statSync(structurePath);\r\n    const lastBuild = stats.mtime.toLocaleString();\r\n    console.log(chalk.green(`  ✓ Build artifacts present`));\r\n    console.log(chalk.gray(`    Last build: ${lastBuild}`));\r\n  } else {\r\n    console.log(chalk.yellow(`  ⚠ No build artifacts found`));\r\n    console.log(chalk.gray(`    Run \\`pkf build\\` to generate`));\r\n  }\r\n  console.log('');\r\n\r\n  // Check documentation structure\r\n  const docsDir = join(cwd, 'docs');\r\n  const hasDocsDir = existsSync(docsDir);\r\n\r\n  console.log(chalk.bold('Documentation:'));\r\n  if (hasDocsDir) {\r\n    const readmePath = join(docsDir, 'README.md');\r\n    const hasReadme = existsSync(readmePath);\r\n\r\n    console.log(chalk.green(`  ✓ docs/ directory exists`));\r\n    console.log(hasReadme\r\n      ? chalk.green(`  ✓ docs/README.md present`)\r\n      : chalk.yellow(`  ⚠ docs/README.md missing`));\r\n\r\n    // Check registers\r\n    const registersDir = join(docsDir, 'registers');\r\n    if (existsSync(registersDir)) {\r\n      const todo = existsSync(join(registersDir, 'TODO.md'));\r\n      const issues = existsSync(join(registersDir, 'ISSUES.md'));\r\n      const changelog = existsSync(join(registersDir, 'CHANGELOG.md'));\r\n\r\n      console.log(chalk.gray(`  Registers:`));\r\n      console.log(todo\r\n        ? chalk.green(`    ✓ TODO.md`)\r\n        : chalk.gray(`    - TODO.md (missing)`));\r\n      console.log(issues\r\n        ? chalk.green(`    ✓ ISSUES.md`)\r\n        : chalk.gray(`    - ISSUES.md (missing)`));\r\n      console.log(changelog\r\n        ? chalk.green(`    ✓ CHANGELOG.md`)\r\n        : chalk.gray(`    - CHANGELOG.md (missing)`));\r\n    }\r\n  } else {\r\n    console.log(chalk.yellow(`  ⚠ docs/ directory not found`));\r\n  }\r\n  console.log('');\r\n\r\n  // Check CLAUDE.md\r\n  const claudePath = join(cwd, 'CLAUDE.md');\r\n  const hasClaudeMd = existsSync(claudePath);\r\n\r\n  console.log(chalk.bold('AI Integration:'));\r\n  console.log(hasClaudeMd\r\n    ? chalk.green(`  ✓ CLAUDE.md present`)\r\n    : chalk.gray(`  - CLAUDE.md not found (optional)`));\r\n  console.log('');\r\n\r\n  // Summary\r\n  console.log(chalk.bold('─'.repeat(40)));\r\n  console.log(chalk.gray('\\nRun `pkf validate` for detailed validation.\\n'));\r\n}\r\n"],"mappings":"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","names":[]}